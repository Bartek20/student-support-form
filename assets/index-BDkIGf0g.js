(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();function d({name:a,index:n,email:o,type:r,message:e,files:t}){const i={};(!a||a.trim().split(" ").length<2)&&(i.name="Imię i nazwisko jest wymagane."),(!n||!/^\d{6,8}$/.test(n))&&(i.index="Numer indeksu musi składać się z 6-8 cyfr."),(!o||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o))&&(i.email="Adres email jest nieprawidłowy.");const m=["wsb.pl","merito.pl"],f=o?.split("@")?.[1];!("email"in i)&&!m.some(l=>f.endsWith(l))&&(i.email="Adres email musi należeć do domeny uczelnianej."),(!r||r.trim()==="")&&(i.type="Musisz wybrać typ zgłoszenia."),(!e||e.trim().length<10)&&(i.message="Wiadomość musi mieć co najmniej 10 znaków.");for(const l of t||[]){if(l.size>5*1024*1024){i.files="Plik nie może być większy niż 5 MB.";break}if(!["application/pdf","image/jpeg","image/png"].includes(l.type)){i.files="Dozwolone są tylko pliki PDF, JPG i PNG.";break}}return i}const s=document.getElementById("supportForm"),c=document.getElementById("form-success");s.addEventListener("submit",function(a){a.preventDefault(),c.hidden=!0;const n={name:s.name.value,index:s.index.value,email:s.email.value,type:s.type.value,message:s.message.value,files:s.attachments.files?Array.from(s.attachments.files):[]},o=d(n);if([...s.elements].forEach(r=>r.classList.remove("error")),document.querySelectorAll(".form-error").forEach(r=>r.textContent=""),Object.keys(o).length>0)for(const r in o){const e=s.elements[r],t=document.querySelector(`[data-error-for="${r}"]`);e&&e.classList.add("error"),t&&(t.textContent=o[r])}else c.hidden=!1,s.reset()});
